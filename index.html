<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>CodePen - Paw walking loader</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <!-- fonts -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">	
  <link href="https://fonts.googleapis.com/css2?family=Balsamiq+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">	  
  <link rel="stylesheet" href="./style.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</head>
<body onload="myfunc()" style="background: linear-gradient(to left bottom , rgba(253, 253, 253, 0.274) ,rgba(255, 255, 255, 0.336))">

	<!-- LOADER -->
<div id="lder">
	<svg id="svg-sprite">
		<symbol id="paw" viewBox="0 0 249 209.32">
			<ellipse cx="27.917" cy="106.333" stroke-width="0" rx="27.917" ry="35.833"/>
			<ellipse cx="84.75" cy="47.749" stroke-width="0" rx="34.75" ry="47.751"/>
			<ellipse cx="162" cy="47.749" stroke-width="0" rx="34.75" ry="47.751"/>
			<ellipse cx="221.083" cy="106.333" stroke-width="0" rx="27.917" ry="35.833"/>
			<path stroke-width="0" d="M43.98 165.39s9.76-63.072 76.838-64.574c0 0 71.082-6.758 83.096 70.33 0 0 2.586 19.855-12.54 31.855 0 0-15.75 17.75-43.75-6.25 0 0-7.124-8.374-24.624-7.874 0 0-12.75-.125-21.5 6.625 0 0-16.375 18.376-37.75 12.75 0 0-28.29-7.72-19.77-42.86z"/>
		</symbol>
	</svg>

	<div class="ajax-loader">
		<div class="paw"><svg class="icon"><use xlink:href="#paw" /></svg></div>
		<div class="paw"><svg class="icon"><use xlink:href="#paw" /></svg></div>
		<div class="paw"><svg class="icon"><use xlink:href="#paw" /></svg></div>
		<div class="paw"><svg class="icon"><use xlink:href="#paw" /></svg></div>
		<div class="paw"><svg class="icon"><use xlink:href="#paw" /></svg></div>
		<div class="paw"><svg class="icon"><use xlink:href="#paw" /></svg></div>
	</div>
	<div class="lderhead">
		<h4 style="ml:25%">Sending Our Best CAT To Fetch Your Dish ...</h4>
	</div>
	<br>
	
</div>

  <!-- Modal Trigger -->
  <!-- <a id="errbut" class="waves-effect waves-light btn modal-trigger" href="#modal1" style="display: none;">Modal</a> -->

  <!-- Modal Structure -->
  <div id="modal1" class="modal curl" style="position: fixed;">
	<div><img class="pop" src="full.png"></div>
    <div class="modal-content" style="background-color: transparent;border:0px;">
	  <h4>PACK YOUR SPACE SUIT ....</h4>
	  <br>
      <p>Hmm.. Looks like person you are searching lives on another planet..!</p>
	</div>
	<br>
	<div style="left:19rem;" class="pop">
		<ul >
			<li style="list-style-type:circle;padding:0.75rem;">Check the spelling of username</li>
			<li style="list-style-type:circle;padding:0.75rem;">Make Stable Internet Connection.</li>
			<li style="list-style-type:circle;padding:0.75rem;">Refresh your browser.</li>
		</ul>
	</div>
	<div style="left:15rem;top:24rem;" class="pop">
		<p>Don't Forget to carry Oxygen Tank.</p>
	</div>
    
  </div>
  
  <div id="srchdiv" class="d-flex ">
	<form class="col-s6" action="index.html" method="get">
		<div class="input-field col s6">
			<input placeholder="search username" id="user" name="user" type="text">
		  </div>
	  </form>
  </div>

  <div class="container" id="noob" style="max-width:1915px;">
	  <div class="row">
		  <div class="col-md-12 col-lg-9">
			<div class="container fluid">
				<div class="row">
					<div class="col-sm-10 col-md-6">
						
						<div class="row" style="text-align: center;">
							<div class="col" >
								<div class="avatardiv"><img id="himg" src="download.jpg"></div>
							  <div class="card" style="top:6rem;position:relative;text-align:center;">
								<!-- <div style="width:0%;text-align:center;"><div class="avatardiv"></div></div> -->
								<div class="card-image " style="height:20rem;background: linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(121,9,32,0.7970938717283788) 24%, rgba(0,212,255,1) 100%);">
								  <div class="align-items-center d-flex justify-content-center"style="width:100%;"><span id="hname" class="card-title align-items-center d-flex justify-content-center"style="top:3.5rem;left:28%;">User Name</span></div>
								  <div class="row" style="height: 2rem;text-align:center;padding-left:3.5rem;padding-top:16.35rem;padding-bottom:1rem;">
									<div class="col-5" style="display: flex;padding-bottom:0.5rem;"><img src="loc.png" title="Location" style="height: 3.5rem;width:auto;padding-top:0rem;padding-right:0.5rem;"> <span id="hloc" style="color:blanchedalmond;top:-2rem;display:inline;padding-top:1rem;"> Location</span></div>
									<div class="col-6" style="display: flex;"><img src="calendar.png" title="Joined" style="height: 2.5rem;width:auto;padding-right:0.5rem;"> <span id="hjoin" style="color:blanchedalmond;padding-top:1rem;"> Join Date</span></div>
								  </div>
								</div>
								<div class="card-content" style="padding: 4rem;">

								  <p id="hbio">here comes the bio .Lorem ipsum dolor, sit amet consectetur adipisicing elit. Expedita, rerum.</p>
								</div>
								<div class="container" style="align-items: center;
								display: grid;
								grid-gap: 2rem;
								grid-template-columns: 1fr 1fr;
								">
									<a id="hfrlink" href="" style="color:#212529;text-decoration: none;"><div class="card score">
										<span><h4 id="hfr">6</h4></span><span>Followers </span>
									</div></a>
									<a id="hfllink" href="" style="color:#212529;text-decoration: none;"><div class="card score">
										<span><h4 id="hfl">12</h4></span><span>Following </span>
									</div></a>
								</div>
								<div class="row score" style="height: 2rem;text-align:center;padding-left: 20%;margin-top:1rem;padding-bottom:3rem">
									<div class="col-3"><img src="repo_icon.jpg" title="Repo" style="height: 3rem;"><span id="hnrepo">0</span></div>
									<div class="col-3" style="top:-0.5rem;"><img src="star_icon.jpg" title="Stars" style="height: 3.8rem;"><span id="hnstar">0</span></div>
									<div class="col-3"><img src="lang_icon.jpg" title="Languages" style="height: 3rem;"><span id="hnlang">0</span></div>
								</div>
								<div class="row card-action">
								  <a id="hlink" href="#">Visit GitHub</a>
								</div>
							  </div>
							</div>
						</div>
								 
					</div>

					<div class="col-sm-10 col-md-6">
						
						<div class="row">
							<div class="col s12 m7">
							  <div class="card" style="top:6rem;">
								<div class="card-content">
								  <h2 class="card-title">Top Languages</h2>
								  <hr>
								  <canvas id="myChart"></canvas>
								</div>
							  </div>
							</div>
						</div>

						<div class="row">
							<div class="col s12 m7">
							  <div class="card" style="top:6rem;">
								<div class="card-content">
								  <h2 class="card-title">Most Starred</h2>
								  <hr>
								  <canvas id="myChart2"></canvas>
								</div>
							  </div>
							</div>
						</div>

						
					</div>
			    </div>
				
				<div class="row">
					<div class="container">
						<div class="card" style="top:7rem;width:90%">
							<div class="card-content">
							  <div class="container" style="display: flex;justify-content:space-between;">
								<div>
									<h2 class="card-title">OverAll</h2>
								</div>
								<div>
									
										<div class="input-field" style="margin-top: -0.7rem;margin-bottom:0rem;">
											<input placeholder="compare username" id="comp" type="text" onkeydown="search(this)" style="text-align: center;">
										</div>
									
								</div>
							  
							  </div>
							  <hr>
							  <canvas id="myChart3"></canvas>
							</div>
						  </div>	
					</div>
				</div>

				<!-- <div class="row">
					<div class="container">Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi architecto suscipit perferendis nam corporis aliquid fugiat, ab illo aspernatur tenetur.
					</div>
				</div> -->

			</div>
		</div>
		<div class="col-md-12 col-lg-3 card" style="top:6rem;height:94rem;">
			<h2 class="card-title" style="padding-top: 1.5rem;padding-bottom:0rem;">Repositories</h2>
			<hr style="margin-top: 0.3rem;">
			<div class="container" id="repos" style="
			overflow-y:auto;
			align-items: center;
			display: grid;
			grid-gap: 25px;
			grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
			grid-template-rows: repeat(120px);">
			
			


			
			</div>
		</div>
	  </div>
  </div>






<!-- partial -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>

	var preloader = document.getElementById("lder");
	function myfunc(){
		preloader.style.display='none';
		preloader.innerHTML="";
	}

	$(window).scroll(function() {
		if ($(this).scrollTop() > 2) {
		  document.getElementById("srchdiv").style.display='none';
		} else {
		  $('#srchdiv').fadeIn();
		}
	  });

const noobi = document.getElementById("noob");

const queryString=window.location.search;
console.log(queryString);
const urlParams = new URLSearchParams(queryString);
const username = urlParams.get('user')
console.log(username); 
forksum=0;
starsum=0;
x1=[];
y1=[];
x2=[];
y2=[];
y3=[];
async function party(){
 url1="https://api.github.com/users/"+username;
 url2="https://api.github.com/users/"+username+"/repos"
 response=await fetch(url1);
 if(!response.ok){
	 noobi.style.display="none";
	 console.log("here");
	
		$('.modal').modal({
			onCloseEnd: function() { window.location.replace("welcome.html");}
		});
	 $('#modal1').modal('open');
 }
 else{
	const user=await response.json();
	let dt = user.created_at;
	document.getElementById("hname").innerHTML=user.name;
	document.getElementById("hjoin").innerHTML=dt.slice(0,10);
	document.getElementById("hloc").innerHTML=user.location;
	document.getElementById("hbio").innerHTML=user.bio;
	document.getElementById("hfr").innerHTML=user.followers;
	document.getElementById("hfl").innerHTML=user.following;
	document.getElementById("hnrepo").innerHTML=user.public_repos;
	document.getElementById("himg").setAttribute("src",user.avatar_url);
	document.getElementById("hlink").setAttribute("href",user.html_url);
	document.getElementById("hfrlink").setAttribute("href",user.followers_url);
	document.getElementById("hfllink").setAttribute("href",user.following_url);
	
	y3=[user.followers,user.following,user.public_repos];
	response2=await fetch(url2);
	const repodata=await response2.json();
	console.log(repodata);
	stlangct={};
	langct={};
	repodata.forEach(i => {
		if(i.language==null){
			var l="other";
		}
		else{
			var l=i.language;
		}
		langct[l] = (langct[l] || 0) + 1;
		forksum = forksum + i.forks_count;
		if(i.stargazers_count > 0){
			starsum=starsum+1;
			stlangct[l]=(stlangct[l] || 0) + 1;
		}
		if(i.description==null){
			var b="";	
		}
		else{
			var b=i.description;
		}

		var str='<a id="repolink" href="'+i.html_url+'"><div class="card" style="border-radius: 0px;height:13rem;"><span class="card-title">  <i class="fa fa-bookmark-o"></i> '+i.name+'</span><div class="card-content"><p>'+b+'</p></div><div id="repoinfo"><span><span><i class="fa fa-code"></i>'+l+'</span><span><i class="fa fa-star-o"></i>'+i.stargazers_count+'</span><span><i class="fa fa-code-fork"></i>'+i.forks_count+'</span></span></div></div></a>';
		$("#repos").append(str);
	})
	console.log(langct);
	console.log(stlangct);
	console.log(Object.keys(langct));
	console.log(Object.values(langct));
	 x1=Object.keys(langct);
	 y1=Object.values(langct);
	 x2=Object.keys(stlangct);
	 y2=Object.values(stlangct);
	 document.getElementById("hnstar").innerHTML=starsum;
	 y3.push(starsum);y3.push(forksum);
	 document.getElementById("hnlang").innerHTML=x1.length;
 }
console.log(response);
}

async function chartit(){
await party();
var ctx = document.getElementById('myChart');
var myChart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: x1,
        datasets: [{
            label: '# of Votes',
            data: y1,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});

var ctx2 = document.getElementById('myChart2');
var myChart2 = new Chart(ctx2, {
    type: 'bar',
    data: {
        labels: x2,
        datasets: [{
            label: '# of Votes',
            data: y2,
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});

var ctx3 = document.getElementById('myChart3');
myChart3 = new Chart(ctx3, {
    type: 'radar',
    data: {
        labels: ['followers','following','repos','starred','forked'],
        datasets: [{
            label: document.getElementById("hname").innerHTML,
            data: y3,
            backgroundColor: [
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
		},
		{
            label: "Other User",
            data: [0,0,0,0,0],
            backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
				'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
}
chartit();

/*$("#meow").submit(function(e) {
	e.preventDefault();
	var cuser = document.getElementById("#comp").innerHTML;
	url1="https://api.github.com/users/"+cuser;
	response3=await fetch(url1);
	if(!response3.ok){
		console.log("pls don't compare with ghosts !");
	    alert("Pls consider comparing with someone who exists ... thnx :)");
	}
	else{
			const newuser = response3.json();
			myChart3.data.datasets[1].label=newuser.name;
			myChart3.data.datasets[1].data = [newuser.followers,newuser.following,newuser.public_repos,5]; // Would update the first dataset's value of 'March' to be 50
			myChart3.update();
		}
});*/

/*$("#comp").on('keyup', function (e) {*/
	function search(ele){
    if (event.key === 'Enter') {
		// Do something
		console.log("enter pressed");
		compare(ele.value);
    }
};

async function compare(cuser){
	/*var cuser = document.getElementById("#comp").value;*/
	url1="https://api.github.com/users/"+cuser;
	url2="https://api.github.com/users/"+cuser+"/repos";
	response3=await fetch(url1);
	if(!response3.ok){
		console.log("pls don't compare with ghosts !");
	    alert("Pls consider comparing with someone who exists ... thnx :)");
	}
	else{
			response4 = await fetch(url2);
			let ssum=0;
			let fsum=0;
			const newuser = await response3.json();
			const newuserstar = await response4.json();
			for(let i=0;i<newuserstar.length;i++){
				ssum = ssum+newuserstar[i].stargazers_count;
				fsum = fsum+newuserstar[i].forks_count;
			}
			console.log(x2);
			console.log(newuser.name);
			myChart3.data.datasets[1].label=newuser.name;
			myChart3.data.datasets[1].data = [newuser.followers,newuser.following,newuser.public_repos,ssum,fsum]; // Would update the first dataset's value of 'March' to be 50
			myChart3.update();
		}
}


</script>
</body>
</html>
